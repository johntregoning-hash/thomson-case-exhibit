import{j as e}from"./jsx-runtime.o45eZTEF.js";import{r}from"./index.DVhKKaGN.js";function E({events:f,onEventInView:o}){const[g,x]=r.useState(""),[c,b]=r.useState(1),[h,u]=r.useState(!1),l=r.useRef(null);return r.useEffect(()=>(l.current=new IntersectionObserver(n=>{n.forEach(i=>{const t=i.target,a=t.dataset.eventId,m=t.dataset.eventDate||"",p=parseInt(t.dataset.eventPhase||"1",10);if(i.isIntersecting){t.classList.add("timeline-event-visible"),t.classList.remove("timeline-event-hidden"),x(m),b(p),u(!0),o&&a&&o(a,m);const d=document.querySelector(`[data-spine-event="${a}"]`);d&&d.classList.add("spine-dot-active")}else{i.boundingClientRect.top>0&&(t.classList.add("timeline-event-hidden"),t.classList.remove("timeline-event-visible"));const v=document.querySelector(`[data-spine-event="${a}"]`);v&&v.classList.remove("spine-dot-active")}})},{root:null,rootMargin:"-20% 0px -30% 0px",threshold:[0,.25,.5,.75,1]}),document.querySelectorAll("[data-event-id]").forEach(n=>{l.current?.observe(n)}),()=>{l.current&&l.current.disconnect()}),[f,o]),r.useEffect(()=>{const s=()=>{const n=document.getElementById("scrollytelling-timeline");if(n){const i=n.getBoundingClientRect(),t=i.top<window.innerHeight&&i.bottom>0;u(t)}};return window.addEventListener("scroll",s,{passive:!0}),s(),()=>{window.removeEventListener("scroll",s)}},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed left-6 lg:left-12 top-1/2 -translate-y-1/2 z-40 transition-all duration-500 ${h?"opacity-100 translate-x-0":"opacity-0 -translate-x-8"}`,children:e.jsxs("div",{className:"bg-slate-900/90 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-4 shadow-lg shadow-black/20",children:[e.jsxs("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-1",children:["Phase ",c]}),e.jsx("div",{className:"text-2xl font-serif font-bold text-white",children:g||"â€”"}),e.jsx("div",{className:"flex gap-1.5 mt-3",children:[1,2,3,4,5,6,7,8].map(s=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${s===c?"bg-gold-500 scale-125 shadow-gold-glow":s<c?"bg-green-500":"bg-slate-700"}`},s))})]})}),e.jsx("div",{className:"fixed right-0 top-16 bottom-0 w-1 z-40 bg-slate-900",children:e.jsx("div",{id:"scroll-progress-bar",className:"w-full bg-gradient-to-b from-gold-500 to-green-500 transition-all duration-100",style:{height:"0%"}})})]})}export{E as default};
