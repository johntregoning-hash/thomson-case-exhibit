import{j as e}from"./jsx-runtime.o45eZTEF.js";import{r}from"./index.DVhKKaGN.js";function E({events:f,onEventInView:o}){const[b,x]=r.useState(""),[c,p]=r.useState(1),[g,u]=r.useState(!1),a=r.useRef(null);return r.useEffect(()=>(a.current=new IntersectionObserver(n=>{n.forEach(i=>{const t=i.target,l=t.dataset.eventId,m=t.dataset.eventDate||"",h=parseInt(t.dataset.eventPhase||"1",10);if(i.isIntersecting){t.classList.add("timeline-event-visible"),t.classList.remove("timeline-event-hidden"),x(m),p(h),u(!0),o&&l&&o(l,m);const d=document.querySelector(`[data-spine-event="${l}"]`);d&&d.classList.add("spine-dot-active")}else{i.boundingClientRect.top>0&&(t.classList.add("timeline-event-hidden"),t.classList.remove("timeline-event-visible"));const v=document.querySelector(`[data-spine-event="${l}"]`);v&&v.classList.remove("spine-dot-active")}})},{root:null,rootMargin:"-20% 0px -30% 0px",threshold:[0,.25,.5,.75,1]}),document.querySelectorAll("[data-event-id]").forEach(n=>{a.current?.observe(n)}),()=>{a.current&&a.current.disconnect()}),[f,o]),r.useEffect(()=>{const s=()=>{const n=document.getElementById("scrollytelling-timeline");if(n){const i=n.getBoundingClientRect(),t=i.top<window.innerHeight&&i.bottom>0;u(t)}};return window.addEventListener("scroll",s,{passive:!0}),s(),()=>{window.removeEventListener("scroll",s)}},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed left-6 lg:left-12 top-1/2 -translate-y-1/2 z-40 transition-all duration-500 ${g?"opacity-100 translate-x-0":"opacity-0 -translate-x-8"}`,children:e.jsxs("div",{className:"bg-[#0d1526]/90 backdrop-blur-xl border border-[#1a2744]/50 rounded-2xl p-4 shadow-lg",children:[e.jsxs("div",{className:"text-xs text-[#5a6b8a] uppercase tracking-wider mb-1",children:["Phase ",c]}),e.jsx("div",{className:"text-2xl font-display font-bold text-white",children:b||"â€”"}),e.jsx("div",{className:"flex gap-1 mt-3",children:[1,2,3,4,5,6,7,8].map(s=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${s===c?"bg-[#d4af37] scale-125":s<c?"bg-[#10b981]":"bg-[#1a2744]"}`},s))})]})}),e.jsx("div",{className:"fixed right-0 top-16 bottom-0 w-1 z-40 bg-[#0d1526]",children:e.jsx("div",{id:"scroll-progress-bar",className:"w-full bg-gradient-to-b from-[#d4af37] to-[#10b981] transition-all duration-100",style:{height:"0%"}})})]})}export{E as default};
