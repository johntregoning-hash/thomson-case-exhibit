---
/**
 * TheVoid Component - V3 Scrollytelling Enhancement
 *
 * Creates a visual "void" effect between timeline phases to emphasize
 * the diagnostic delay period. Uses exaggerated spacing and visual
 * effects to represent the ~3 month gap between MRI confirmation
 * and proper diagnosis.
 *
 * Features:
 * - Dramatic vertical spacing
 * - Gradient void effect
 * - Animated particles
 * - Delay counter
 */

interface Props {
  startDate: string;
  endDate: string;
  delayDays: number;
  delayMonths: string;
  message?: string;
}

const { 
  startDate, 
  endDate, 
  delayDays = 82, 
  delayMonths = "~3 months",
  message = "MRI confirmed fractures. Patient still wasn't told." 
} = Astro.props;
---

<div class="the-void relative py-32 my-8" id="the-void">
  <!-- Void Background -->
  <div class="absolute inset-0 bg-gradient-to-b from-navy-950 via-[#020617] to-navy-950 opacity-80"></div>
  
  <!-- Animated particles (subtle) -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="void-particle particle-1"></div>
    <div class="void-particle particle-2"></div>
    <div class="void-particle particle-3"></div>
  </div>
  
  <!-- Content -->
  <div class="relative z-10 text-center px-6">
    <!-- The Void Label -->
    <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-navy-900/80 border border-navy-700/50 mb-8">
      <div class="w-2 h-2 rounded-full bg-red-500 animate-pulse"></div>
      <span class="text-sm font-mono text-red-400 uppercase tracking-wider">The Void</span>
    </div>
    
    <!-- Time Markers -->
    <div class="flex justify-center items-center gap-4 mb-8">
      <div class="text-right">
        <p class="text-sm text-navy-500">MRI Confirmed</p>
        <p class="text-xl font-display font-bold text-gold-400">{startDate}</p>
      </div>
      
      <!-- Arrow with days -->
      <div class="flex items-center gap-2 px-6">
        <div class="h-px w-12 bg-gradient-to-r from-gold-500/50 to-transparent"></div>
        <span class="text-3xl font-display font-bold text-red-400">{delayDays}</span>
        <span class="text-sm text-navy-400">days</span>
        <div class="h-px w-12 bg-gradient-to-l from-red-500/50 to-transparent"></div>
      </div>
      
      <div class="text-left">
        <p class="text-sm text-navy-500">Covert Diagnosis</p>
        <p class="text-xl font-display font-bold text-red-400">{endDate}</p>
      </div>
    </div>
    
    <!-- Delay Counter -->
    <div class="inline-block px-8 py-4 rounded-2xl bg-navy-900/60 border border-red-500/20 backdrop-blur-xl">
      <p class="text-sm text-navy-400 mb-1">Diagnostic Gap</p>
      <p class="text-4xl font-display font-bold text-white">
        {delayMonths}
      </p>
    </div>
    
    <!-- Message -->
    <p class="mt-8 text-lg text-navy-300 max-w-md mx-auto leading-relaxed">
      {message}
    </p>
    
    <!-- Subtle accusation -->
    <p class="mt-4 text-sm text-red-400/70 italic">
      "Instead, a psychiatric label was applied."
    </p>
  </div>
  
  <!-- Bottom gradient fade -->
  <div class="absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-navy-950 to-transparent"></div>
</div>

<style>
  .the-void {
    /* Exaggerated height to emphasize the "void" */
    min-height: 40vh;
  }
  
  /* Floating particles effect */
  .void-particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: rgba(239, 68, 68, 0.3);
    border-radius: 50%;
    animation: float 10s ease-in-out infinite;
  }
  
  .particle-1 {
    left: 20%;
    top: 30%;
    animation-delay: 0s;
    animation-duration: 12s;
  }
  
  .particle-2 {
    left: 70%;
    top: 50%;
    animation-delay: 2s;
    animation-duration: 14s;
  }
  
  .particle-3 {
    left: 45%;
    top: 70%;
    animation-delay: 4s;
    animation-duration: 16s;
  }
  
  @keyframes float {
    0%, 100% {
      transform: translateY(0) translateX(0);
      opacity: 0.3;
    }
    25% {
      transform: translateY(-20px) translateX(10px);
      opacity: 0.6;
    }
    50% {
      transform: translateY(-10px) translateX(-5px);
      opacity: 0.4;
    }
    75% {
      transform: translateY(-30px) translateX(15px);
      opacity: 0.5;
    }
  }
</style>
