---
import BaseLayout from '@layouts/BaseLayout.astro';
import Card from '@components/common/Card.astro';
import Badge from '@components/common/Badge.astro';

// Actors data
const actors = [
  {
    id: 'A001',
    name: 'Dr Amit Gupta',
    role: 'General Practitioner',
    organisation: 'Garden & Whitton Medical Practice',
    category: 'gp',
    conduct: 'critical',
    conductSummary: 'Authored MH1 referral (28 Sep 2020) linking patient\'s symptoms to "somatisation" and brother\'s suicide. Documented "on same path as his brother who committed suicide" and "his condition is one that craves investigation."',
    findings: ['F002', 'F040'],
    dates: ['28 Sep 2020', '23 Oct 2020', '04 Nov 2020']
  },
  {
    id: 'A002',
    name: 'Dr Bulale Ali',
    role: 'General Practitioner',
    organisation: 'Garden & Whitton Medical Practice',
    category: 'gp',
    conduct: 'critical',
    conductSummary: 'Recorded patient was "sleeping pain-free" in September 2021, directly contradicted by MSK physio notes documenting inability to sleep due to pain.',
    findings: ['F001'],
    dates: ['Sep 2021']
  },
  {
    id: 'A003',
    name: 'Clive Polles',
    role: 'Practice Manager',
    organisation: 'Garden & Whitton Medical Practice',
    category: 'manager',
    conduct: 'critical',
    conductSummary: 'Direct patient contact documented via iMessage (05 Jul 2022). Referenced by current GP as having done "sketchy stuff" blocking practice merger. Allegedly involved in clinical decisions beyond administrative authority.',
    findings: ['F021', 'F136'],
    dates: ['05 Jul 2022', '08 Jul 2022']
  },
  {
    id: 'A004',
    name: 'Dr Alexander Gorrie',
    role: 'General Practitioner',
    organisation: 'Current Practice',
    category: 'gp',
    conduct: 'supportive',
    conductSummary: 'Removed Somatoform Pain Disorder diagnosis (22 Jul 2025) noting "there were clear causes for his pain." Referenced "sketchy stuff" by former practice manager. Properly recognised 2021 seizure/fractures and referred to orthopaedics.',
    findings: ['F021', 'F030', 'F034'],
    dates: ['17 Oct 2023', '22 Jul 2025']
  },
  {
    id: 'A005',
    name: 'Dr Kushan Karunaratne',
    role: 'Consultant Neurologist (Epilepsy)',
    organisation: 'Imperial College Healthcare NHS Trust',
    category: 'specialist',
    conduct: 'supportive',
    conductSummary: 'NHS epilepsy specialist who verbally used phrase "data manipulation" when discussing GP care issues, with patient\'s parents as witnesses.',
    findings: ['F003', 'F020'],
    dates: ['22 Mar 2022']
  },
  {
    id: 'A006',
    name: 'Sumeer Bhamm',
    role: 'Senior MSK Physiotherapist',
    organisation: 'Charing Cross Hospital (Imperial)',
    category: 'specialist',
    conduct: 'supportive',
    conductSummary: 'Documented GP dismissal pattern (Aug 2021): "issues with GP, as they did not believe his pain and accused him for attention seeking." Also documented Pain Clinic rejection without patient consultation (Nov 2021).',
    findings: ['F022', 'F027'],
    dates: ['04 Aug 2021', '23 Nov 2021']
  },
  {
    id: 'A007',
    name: 'Jason Parry',
    role: 'Clinical Specialist Physiotherapist',
    organisation: 'UCLH Hypermobility Service',
    category: 'specialist',
    conduct: 'supportive',
    conductSummary: 'Conducted rare face-to-face examination (Jul 2021) documenting physical signs: paraspinal muscle spasm, lumbar stiffness, reduced core stability. Confirmed October 2020 pain onset.',
    findings: ['F026'],
    dates: ['22 Jul 2021']
  },
  {
    id: 'A008',
    name: 'Dr Gupta (Psychiatrist)',
    role: 'Consultant Psychiatrist',
    organisation: 'NHS Mental Health Services',
    category: 'specialist',
    conduct: 'supportive',
    conductSummary: 'Conducted psychiatric assessment finding NO: PTSD, depression, psychosis, personality disorder, OR somatisation disorder. Presentation consistent with inadequately treated physical illness.',
    findings: ['F038'],
    dates: ['2023']
  },
  {
    id: 'A009',
    name: 'Dr Arun Bhaskar',
    role: 'Pain Consultant',
    organisation: 'Imperial College Healthcare NHS Trust',
    category: 'specialist',
    conduct: 'problematic',
    conductSummary: 'Rejected pain referral as "not appropriate" (Oct 2021) despite severe pain, advising referral to psychiatrist instead.',
    findings: ['F027', 'F043'],
    dates: ['18 Oct 2021']
  }
];

const getConductColor = (conduct: string) => {
  switch (conduct) {
    case 'supportive': return 'vindication';
    case 'problematic': return 'discrepancy';
    case 'critical': return 'breach';
    default: return 'default';
  }
};

const getConductLabel = (conduct: string) => {
  switch (conduct) {
    case 'supportive': return 'Supportive';
    case 'problematic': return 'Problematic';
    case 'critical': return 'Critical Conduct';
    default: return 'Neutral';
  }
};

const getCategoryIcon = (category: string) => {
  switch (category) {
    case 'gp':
      return '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>';
    case 'specialist':
      return '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>';
    case 'manager':
      return '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>';
    default:
      return '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>';
  }
};

const supportive = actors.filter(a => a.conduct === 'supportive');
const problematic = actors.filter(a => a.conduct !== 'supportive');
---

<BaseLayout title="Actors" description="Key individuals involved in the Thomson clinical negligence case">
  <!-- Header -->
  <section class="py-16 bg-navy-900/30">
    <div class="container-wide">
      <div class="max-w-3xl">
        <h1 class="text-4xl font-serif font-bold text-white mb-4">Key Actors</h1>
        <p class="text-lg text-navy-300">
          Individuals documented in the case with their roles, organisations, and documented conduct.
          Each actor is linked to relevant findings.
        </p>
      </div>
    </div>
  </section>

  <!-- Stats -->
  <section class="border-y border-navy-800/50 bg-navy-950">
    <div class="container-wide py-6">
      <div class="flex flex-wrap items-center gap-6">
        <div class="flex items-center gap-2">
          <span class="text-2xl font-bold text-white">{actors.length}</span>
          <span class="text-sm text-navy-400">Key Actors</span>
        </div>
        <div class="w-px h-8 bg-navy-800 hidden sm:block"></div>
        <div class="flex items-center gap-2">
          <span class="text-2xl font-bold text-vindication-400">{supportive.length}</span>
          <span class="text-sm text-navy-400">Supportive</span>
        </div>
        <div class="w-px h-8 bg-navy-800 hidden sm:block"></div>
        <div class="flex items-center gap-2">
          <span class="text-2xl font-bold text-breach-400">{problematic.length}</span>
          <span class="text-sm text-navy-400">Problematic</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Supportive Actors -->
  <section class="py-16">
    <div class="container-wide">
      <h2 class="text-2xl font-serif font-bold text-white mb-6 flex items-center gap-3">
        <span class="w-3 h-3 rounded-full bg-vindication-500"></span>
        Supportive Clinicians
      </h2>
      <p class="text-navy-400 mb-8">
        Healthcare professionals who documented objective findings, refuted psychiatric mischaracterisation,
        or advocated for appropriate care.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {supportive.map((actor) => (
          <Card variant="default" class="p-6 border-vindication-500/20 hover:border-vindication-500/40 transition-all">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 rounded-xl bg-vindication-500/20 flex items-center justify-center text-vindication-500">
                <Fragment set:html={getCategoryIcon(actor.category)} />
              </div>
              <div class="flex-1">
                <div class="flex items-start justify-between">
                  <div>
                    <h3 class="font-semibold text-white">{actor.name}</h3>
                    <p class="text-sm text-navy-400">{actor.role}</p>
                    <p class="text-xs text-navy-500">{actor.organisation}</p>
                  </div>
                  <Badge variant={getConductColor(actor.conduct) as any}>
                    {getConductLabel(actor.conduct)}
                  </Badge>
                </div>

                <p class="text-sm text-navy-300 mt-4 leading-relaxed">
                  {actor.conductSummary}
                </p>

                <div class="mt-4 pt-4 border-t border-navy-800/50 flex items-center justify-between">
                  <div class="flex gap-2">
                    {actor.findings.map((f) => (
                      <a href={`/findings/${f.toLowerCase()}`} class="text-xs font-mono text-gold-500 hover:text-gold-400">
                        {f}
                      </a>
                    ))}
                  </div>
                  <span class="text-xs text-navy-500">{actor.dates[0]}</span>
                </div>
              </div>
            </div>
          </Card>
        ))}
      </div>
    </div>
  </section>

  <!-- Problematic Actors -->
  <section class="py-16 bg-navy-900/30">
    <div class="container-wide">
      <h2 class="text-2xl font-serif font-bold text-white mb-6 flex items-center gap-3">
        <span class="w-3 h-3 rounded-full bg-breach-500"></span>
        Documented Conduct Issues
      </h2>
      <p class="text-navy-400 mb-8">
        Healthcare professionals and staff whose documented actions form part of the negligence allegations.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {problematic.map((actor) => (
          <Card variant="default" class="p-6 border-breach-500/20 hover:border-breach-500/40 transition-all">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 rounded-xl bg-breach-500/20 flex items-center justify-center text-breach-500">
                <Fragment set:html={getCategoryIcon(actor.category)} />
              </div>
              <div class="flex-1">
                <div class="flex items-start justify-between">
                  <div>
                    <h3 class="font-semibold text-white">{actor.name}</h3>
                    <p class="text-sm text-navy-400">{actor.role}</p>
                    <p class="text-xs text-navy-500">{actor.organisation}</p>
                  </div>
                  <Badge variant={getConductColor(actor.conduct) as any}>
                    {getConductLabel(actor.conduct)}
                  </Badge>
                </div>

                <p class="text-sm text-navy-300 mt-4 leading-relaxed">
                  {actor.conductSummary}
                </p>

                <div class="mt-4 pt-4 border-t border-navy-800/50 flex items-center justify-between">
                  <div class="flex gap-2">
                    {actor.findings.map((f) => (
                      <a href={`/findings/${f.toLowerCase()}`} class="text-xs font-mono text-gold-500 hover:text-gold-400">
                        {f}
                      </a>
                    ))}
                  </div>
                  <span class="text-xs text-navy-500">{actor.dates[0]}</span>
                </div>
              </div>
            </div>
          </Card>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>
