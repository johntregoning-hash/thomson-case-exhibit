import{j as o}from"./jsx-runtime.o45eZTEF.js";import{r as l}from"./index.DVhKKaGN.js";function x(){const[r,i]=l.useState([]),[a,c]=l.useState("");l.useEffect(()=>{const e=document.querySelector("article");if(!e)return;const s=e.querySelectorAll("h2, h3, h4"),t=[];s.forEach((n,f)=>{n.id||(n.id=`heading-${f}`),t.push({id:n.id,text:n.textContent||"",level:parseInt(n.tagName.charAt(1))})}),i(t),t.length>0&&c(t[0].id)},[]),l.useEffect(()=>{if(r.length===0)return;const e=new IntersectionObserver(s=>{s.forEach(t=>{t.isIntersecting&&c(t.target.id)})},{rootMargin:"-80px 0px -70% 0px",threshold:0});return r.forEach(({id:s})=>{const t=document.getElementById(s);t&&e.observe(t)}),()=>e.disconnect()},[r]);const d=e=>{const s=document.getElementById(e);if(s){const n=s.getBoundingClientRect().top+window.scrollY-100;window.scrollTo({top:n,behavior:"smooth"})}};return r.length===0?null:o.jsxs("nav",{className:"space-y-1","aria-label":"Table of contents",children:[o.jsx("h3",{className:"text-sm font-semibold text-white uppercase tracking-wider mb-3",children:"Contents"}),o.jsx("ul",{className:"space-y-1 text-sm",children:r.map(e=>o.jsx("li",{style:{paddingLeft:`${(e.level-2)*12}px`},children:o.jsx("button",{onClick:()=>d(e.id),className:`
                block w-full text-left py-1.5 px-2 rounded transition-all duration-200
                ${a===e.id?"bg-gold-500/10 text-gold-400 border-l-2 border-gold-500":"text-navy-400 hover:text-white hover:bg-navy-800/50 border-l-2 border-transparent"}
                ${e.level===2?"font-medium":"text-xs"}
              `,children:o.jsx("span",{className:"line-clamp-2",children:e.text})})},e.id))})]})}export{x as default};
